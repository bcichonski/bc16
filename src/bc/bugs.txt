return has to be last instruction in function, not working in nested blocks

passing functions parameters through to other functions may fail
